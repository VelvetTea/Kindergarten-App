{"ast":null,"code":"var _class;\nimport { CHILDREN_PER_PAGE } from './constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./store.service\";\nexport class BackendService {\n  constructor(http, storeService) {\n    this.http = http;\n    this.storeService = storeService;\n  }\n  getKindergardens() {\n    this.http.get('http://localhost:5000/kindergardens').subscribe(data => {\n      this.storeService.kindergardens = data;\n    });\n  }\n  getChildren(page) {\n    this.http.get(`http://localhost:5000/childs?_expand=kindergarden&_page=${page}&_limit=${CHILDREN_PER_PAGE}`, {\n      observe: 'response'\n    }).subscribe(data => {\n      this.storeService.children = data.body;\n      this.storeService.childrenTotalCount = Number(data.headers.get('X-Total-Count'));\n    });\n  }\n  addChildData(child, page) {\n    this.http.post('http://localhost:5000/childs', child).subscribe(_ => {\n      this.getChildren(page);\n    });\n  }\n  deleteChildData(childId, page) {\n    this.http.delete(`http://localhost:5000/childs/${childId}`).subscribe(_ => {\n      this.getChildren(page);\n    });\n  }\n}\n_class = BackendService;\n_class.ɵfac = function BackendService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.StoreService));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["CHILDREN_PER_PAGE","BackendService","constructor","http","storeService","getKindergardens","get","subscribe","data","kindergardens","getChildren","page","observe","children","body","childrenTotalCount","Number","headers","addChildData","child","post","_","deleteChildData","childId","delete","i0","ɵɵinject","i1","HttpClient","i2","StoreService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\LindaW\\Desktop\\FH\\HID\\Kindergarten\\src\\app\\shared\\backend.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Kindergarden } from './interfaces/Kindergarden';\r\nimport { StoreService } from './store.service';\r\nimport { Child, ChildResponse } from './interfaces/Child';\r\nimport { CHILDREN_PER_PAGE } from './constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BackendService {\r\n\r\n  constructor(private http: HttpClient, private storeService: StoreService) { }\r\n\r\n  public getKindergardens() {\r\n    this.http.get<Kindergarden[]>('http://localhost:5000/kindergardens').subscribe(data => {\r\n      this.storeService.kindergardens = data;\r\n    });\r\n  }\r\n\r\n  public getChildren(page: number) {\r\n    this.http.get<ChildResponse[]>(`http://localhost:5000/childs?_expand=kindergarden&_page=${page}&_limit=${CHILDREN_PER_PAGE}`, { observe: 'response' }).subscribe(data => {\r\n      this.storeService.children = data.body!;\r\n      this.storeService.childrenTotalCount = Number(data.headers.get('X-Total-Count'));\r\n\r\n    });\r\n    }\r\n\r\n    public addChildData(child: Child, page:  number) {\r\n      this.http.post('http://localhost:5000/childs', child).subscribe(_ => {\r\n        this.getChildren(page);\r\n      })\r\n    }\r\n\r\n    public deleteChildData(childId: string, page: number) {\r\n      this.http.delete(`http://localhost:5000/childs/${childId}`).subscribe(_=> {\r\n        this.getChildren(page);\r\n      })\r\n    }\r\n  }\r\n"],"mappings":";AAKA,SAASA,iBAAiB,QAAQ,aAAa;;;;AAK/C,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,IAAgB,EAAUC,YAA0B;IAApD,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,YAAY,GAAZA,YAAY;EAAkB;EAErEC,gBAAgBA,CAAA;IACrB,IAAI,CAACF,IAAI,CAACG,GAAG,CAAiB,qCAAqC,CAAC,CAACC,SAAS,CAACC,IAAI,IAAG;MACpF,IAAI,CAACJ,YAAY,CAACK,aAAa,GAAGD,IAAI;IACxC,CAAC,CAAC;EACJ;EAEOE,WAAWA,CAACC,IAAY;IAC7B,IAAI,CAACR,IAAI,CAACG,GAAG,CAAkB,2DAA2DK,IAAI,WAAWX,iBAAiB,EAAE,EAAE;MAAEY,OAAO,EAAE;IAAU,CAAE,CAAC,CAACL,SAAS,CAACC,IAAI,IAAG;MACtK,IAAI,CAACJ,YAAY,CAACS,QAAQ,GAAGL,IAAI,CAACM,IAAK;MACvC,IAAI,CAACV,YAAY,CAACW,kBAAkB,GAAGC,MAAM,CAACR,IAAI,CAACS,OAAO,CAACX,GAAG,CAAC,eAAe,CAAC,CAAC;IAElF,CAAC,CAAC;EACF;EAEOY,YAAYA,CAACC,KAAY,EAAER,IAAa;IAC7C,IAAI,CAACR,IAAI,CAACiB,IAAI,CAAC,8BAA8B,EAAED,KAAK,CAAC,CAACZ,SAAS,CAACc,CAAC,IAAG;MAClE,IAAI,CAACX,WAAW,CAACC,IAAI,CAAC;IACxB,CAAC,CAAC;EACJ;EAEOW,eAAeA,CAACC,OAAe,EAAEZ,IAAY;IAClD,IAAI,CAACR,IAAI,CAACqB,MAAM,CAAC,gCAAgCD,OAAO,EAAE,CAAC,CAAChB,SAAS,CAACc,CAAC,IAAE;MACvE,IAAI,CAACX,WAAW,CAACC,IAAI,CAAC;IACxB,CAAC,CAAC;EACJ;;SA5BSV,cAAc;;mBAAdA,MAAc,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,YAAA;AAAA;;SAAd7B,MAAc;EAAA8B,OAAA,EAAd9B,MAAc,CAAA+B,IAAA;EAAAC,UAAA,EAFb;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}