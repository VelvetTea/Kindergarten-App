{"ast":null,"code":"var _class;\nimport { EventEmitter } from '@angular/core';\nimport { CHILDREN_PER_PAGE } from 'src/app/shared/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/store.service\";\nimport * as i2 from \"src/app/shared/backend.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./pagination.pipe\";\nfunction DataComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function DataComponent_tr_13_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const child_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.cancelRegistration(child_r2.id));\n    });\n    i0.ɵɵtext(13, \"Kind abmelden\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const child_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(child_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(child_r2.kindergarden.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(child_r2.kindergarden.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.getAge(child_r2.birthDate));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 5, child_r2.birthDate, \"longDate\"));\n  }\n}\nfunction DataComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function DataComponent_button_14_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const page_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.selectPage(page_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const page_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", page_r5 == ctx_r1.currentPage ? \"active\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(page_r5);\n  }\n}\nexport class DataComponent {\n  constructor(storeService, backendService) {\n    this.storeService = storeService;\n    this.backendService = backendService;\n    this.selectPageEvent = new EventEmitter();\n    this.page = 0;\n  }\n  ngOnInit() {\n    this.backendService.getChildren(this.currentPage);\n  }\n  getAge(birthDate) {\n    var today = new Date();\n    var birthDateTimestamp = new Date(birthDate);\n    var age = today.getFullYear() - birthDateTimestamp.getFullYear();\n    var m = today.getMonth() - birthDateTimestamp.getMonth();\n    if (m < 0 || m === 0 && today.getDate() < birthDateTimestamp.getDate()) {\n      age--;\n    }\n    return age;\n  }\n  selectPage(i) {\n    let currentPage = i;\n    this.selectPageEvent.emit(currentPage);\n    this.backendService.getChildren(currentPage);\n  }\n  returnAllPages() {\n    return Math.ceil(this.storeService.childrenTotalCount / CHILDREN_PER_PAGE);\n  }\n  cancelRegistration(childId) {\n    this.backendService.deleteChildData(childId, this.currentPage);\n  }\n}\n_class = DataComponent;\n_class.ɵfac = function DataComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.StoreService), i0.ɵɵdirectiveInject(i2.BackendService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-data\"]],\n  inputs: {\n    currentPage: \"currentPage\"\n  },\n  outputs: {\n    selectPageEvent: \"selectPageEvent\"\n  },\n  decls: 16,\n  vars: 4,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"type\", \"button\", 3, \"ngClass\", \"click\"]],\n  template: function DataComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\")(1, \"tr\")(2, \"th\");\n      i0.ɵɵtext(3, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"th\");\n      i0.ɵɵtext(5, \"Kindergarden\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"th\");\n      i0.ɵɵtext(7, \"Adresse\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"th\");\n      i0.ɵɵtext(9, \"Alter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Geburtsdatum\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"th\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, DataComponent_tr_13_Template, 14, 8, \"tr\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, DataComponent_button_14_Template, 2, 2, \"button\", 1);\n      i0.ɵɵpipe(15, \"pagination\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.storeService.children);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(15, 2, ctx.returnAllPages()));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.DatePipe, i4.PaginationPipe],\n  styles: [\"button.active[_ngcontent-%COMP%] {\\n  background-color: orange;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGFzaGJvYXJkL2RhdGEvZGF0YS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHdCQUFBO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b24uYWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IG9yYW5nZTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["EventEmitter","CHILDREN_PER_PAGE","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DataComponent_tr_13_Template_button_click_12_listener","restoredCtx","ɵɵrestoreView","_r4","child_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","cancelRegistration","id","ɵɵadvance","ɵɵtextInterpolate","name","kindergarden","address","ctx_r0","getAge","birthDate","ɵɵpipeBind2","DataComponent_button_14_Template_button_click_0_listener","_r7","page_r5","ctx_r6","selectPage","ɵɵproperty","ctx_r1","currentPage","DataComponent","constructor","storeService","backendService","selectPageEvent","page","ngOnInit","getChildren","today","Date","birthDateTimestamp","age","getFullYear","m","getMonth","getDate","i","emit","returnAllPages","Math","ceil","childrenTotalCount","childId","deleteChildData","ɵɵdirectiveInject","i1","StoreService","i2","BackendService","selectors","inputs","outputs","decls","vars","consts","template","DataComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","DataComponent_tr_13_Template","DataComponent_button_14_Template","children","ɵɵpipeBind1"],"sources":["C:\\Users\\LindaW\\Desktop\\FH\\HID\\Kindergarten\\src\\app\\dashboard\\data\\data.component.ts","C:\\Users\\LindaW\\Desktop\\FH\\HID\\Kindergarten\\src\\app\\dashboard\\data\\data.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { BackendService } from 'src/app/shared/backend.service';\r\nimport { CHILDREN_PER_PAGE } from 'src/app/shared/constants';\r\nimport { StoreService } from 'src/app/shared/store.service';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss']\r\n})\r\nexport class DataComponent implements OnInit {\r\n\r\n  constructor(public storeService: StoreService, private backendService: BackendService) {}\r\n  @Input() currentPage!: number;\r\n  @Output() selectPageEvent = new EventEmitter<number>();\r\n  public page: number = 0;\r\n\r\n  ngOnInit(): void {\r\n    this.backendService.getChildren(this.currentPage);\r\n  }\r\n\r\n  getAge(birthDate: string) {\r\n    var today = new Date();\r\n    var birthDateTimestamp = new Date(birthDate);\r\n    var age = today.getFullYear() - birthDateTimestamp.getFullYear();\r\n    var m = today.getMonth() - birthDateTimestamp.getMonth();\r\n    if (m < 0 || (m === 0 && today.getDate() < birthDateTimestamp.getDate())) {\r\n        age--;\r\n    }\r\n    return age;\r\n  }\r\n\r\n  selectPage(i: any) {\r\n    let currentPage = i;\r\n    this.selectPageEvent.emit(currentPage)\r\n    this.backendService.getChildren(currentPage);\r\n  }\r\n\r\n  public returnAllPages() {\r\n    return Math.ceil(this.storeService.childrenTotalCount / CHILDREN_PER_PAGE)\r\n  }\r\n\r\n  public cancelRegistration(childId: string) {\r\n    this.backendService.deleteChildData(childId, this.currentPage);\r\n  }\r\n}\r\n\r\n\r\n","<table>\r\n    <tr>\r\n        <th>Name</th>\r\n        <th>Kindergarden</th>\r\n        <th>Adresse</th>\r\n        <th>Alter</th>\r\n        <th>Geburtsdatum</th>\r\n        <th></th>\r\n      </tr>\r\n    <tr *ngFor=\"let child of storeService.children\">\r\n        <td>{{child.name}}</td>\r\n        <td>{{child.kindergarden.name}}</td>\r\n        <td>{{child.kindergarden.address}}</td>\r\n        <td>{{getAge(child.birthDate)}}</td>\r\n        <td>{{child.birthDate | date:'longDate'}}</td>\r\n        <button (click)=\"cancelRegistration(child.id)\">Kind abmelden</button>\r\n    </tr>\r\n</table>\r\n\r\n<button [ngClass]=\"page == currentPage ? 'active' : ''\" (click)=\"selectPage(page)\" type=\"button\" *ngFor=\"let page of returnAllPages() | pagination \">{{page}}</button>"],"mappings":";AAAA,SAAoBA,YAAY,QAA+B,eAAe;AAE9E,SAASC,iBAAiB,QAAQ,0BAA0B;;;;;;;;;ICOxDC,EAAA,CAAAC,cAAA,SAAgD;IACxCD,EAAA,CAAAE,MAAA,GAAc;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACvBH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAA2B;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACpCH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAA8B;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACvCH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAA2B;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACpCH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,IAAqC;;IAAAF,EAAA,CAAAG,YAAA,EAAK;IAC9CH,EAAA,CAAAC,cAAA,iBAA+C;IAAvCD,EAAA,CAAAI,UAAA,mBAAAC,sDAAA;MAAA,MAAAC,WAAA,GAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,QAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAX,EAAA,CAAAY,aAAA;MAAA,OAASZ,EAAA,CAAAa,WAAA,CAAAF,MAAA,CAAAG,kBAAA,CAAAL,QAAA,CAAAM,EAAA,CAA4B;IAAA,EAAC;IAACf,EAAA,CAAAE,MAAA,qBAAa;IAAAF,EAAA,CAAAG,YAAA,EAAS;;;;;IALjEH,EAAA,CAAAgB,SAAA,GAAc;IAAdhB,EAAA,CAAAiB,iBAAA,CAAAR,QAAA,CAAAS,IAAA,CAAc;IACdlB,EAAA,CAAAgB,SAAA,GAA2B;IAA3BhB,EAAA,CAAAiB,iBAAA,CAAAR,QAAA,CAAAU,YAAA,CAAAD,IAAA,CAA2B;IAC3BlB,EAAA,CAAAgB,SAAA,GAA8B;IAA9BhB,EAAA,CAAAiB,iBAAA,CAAAR,QAAA,CAAAU,YAAA,CAAAC,OAAA,CAA8B;IAC9BpB,EAAA,CAAAgB,SAAA,GAA2B;IAA3BhB,EAAA,CAAAiB,iBAAA,CAAAI,MAAA,CAAAC,MAAA,CAAAb,QAAA,CAAAc,SAAA,EAA2B;IAC3BvB,EAAA,CAAAgB,SAAA,GAAqC;IAArChB,EAAA,CAAAiB,iBAAA,CAAAjB,EAAA,CAAAwB,WAAA,QAAAf,QAAA,CAAAc,SAAA,cAAqC;;;;;;IAKjDvB,EAAA,CAAAC,cAAA,gBAAqJ;IAA7FD,EAAA,CAAAI,UAAA,mBAAAqB,yDAAA;MAAA,MAAAnB,WAAA,GAAAN,EAAA,CAAAO,aAAA,CAAAmB,GAAA;MAAA,MAAAC,OAAA,GAAArB,WAAA,CAAAI,SAAA;MAAA,MAAAkB,MAAA,GAAA5B,EAAA,CAAAY,aAAA;MAAA,OAASZ,EAAA,CAAAa,WAAA,CAAAe,MAAA,CAAAC,UAAA,CAAAF,OAAA,CAAgB;IAAA,EAAC;IAAmE3B,EAAA,CAAAE,MAAA,GAAQ;IAAAF,EAAA,CAAAG,YAAA,EAAS;;;;;IAA9JH,EAAA,CAAA8B,UAAA,YAAAH,OAAA,IAAAI,MAAA,CAAAC,WAAA,iBAA+C;IAA8FhC,EAAA,CAAAgB,SAAA,GAAQ;IAARhB,EAAA,CAAAiB,iBAAA,CAAAU,OAAA,CAAQ;;;ADT7J,OAAM,MAAOM,aAAa;EAExBC,YAAmBC,YAA0B,EAAUC,cAA8B;IAAlE,KAAAD,YAAY,GAAZA,YAAY;IAAwB,KAAAC,cAAc,GAAdA,cAAc;IAE3D,KAAAC,eAAe,GAAG,IAAIvC,YAAY,EAAU;IAC/C,KAAAwC,IAAI,GAAW,CAAC;EAHiE;EAKxFC,QAAQA,CAAA;IACN,IAAI,CAACH,cAAc,CAACI,WAAW,CAAC,IAAI,CAACR,WAAW,CAAC;EACnD;EAEAV,MAAMA,CAACC,SAAiB;IACtB,IAAIkB,KAAK,GAAG,IAAIC,IAAI,EAAE;IACtB,IAAIC,kBAAkB,GAAG,IAAID,IAAI,CAACnB,SAAS,CAAC;IAC5C,IAAIqB,GAAG,GAAGH,KAAK,CAACI,WAAW,EAAE,GAAGF,kBAAkB,CAACE,WAAW,EAAE;IAChE,IAAIC,CAAC,GAAGL,KAAK,CAACM,QAAQ,EAAE,GAAGJ,kBAAkB,CAACI,QAAQ,EAAE;IACxD,IAAID,CAAC,GAAG,CAAC,IAAKA,CAAC,KAAK,CAAC,IAAIL,KAAK,CAACO,OAAO,EAAE,GAAGL,kBAAkB,CAACK,OAAO,EAAG,EAAE;MACtEJ,GAAG,EAAE;;IAET,OAAOA,GAAG;EACZ;EAEAf,UAAUA,CAACoB,CAAM;IACf,IAAIjB,WAAW,GAAGiB,CAAC;IACnB,IAAI,CAACZ,eAAe,CAACa,IAAI,CAAClB,WAAW,CAAC;IACtC,IAAI,CAACI,cAAc,CAACI,WAAW,CAACR,WAAW,CAAC;EAC9C;EAEOmB,cAAcA,CAAA;IACnB,OAAOC,IAAI,CAACC,IAAI,CAAC,IAAI,CAAClB,YAAY,CAACmB,kBAAkB,GAAGvD,iBAAiB,CAAC;EAC5E;EAEOe,kBAAkBA,CAACyC,OAAe;IACvC,IAAI,CAACnB,cAAc,CAACoB,eAAe,CAACD,OAAO,EAAE,IAAI,CAACvB,WAAW,CAAC;EAChE;;SAlCWC,aAAa;;mBAAbA,MAAa,EAAAjC,EAAA,CAAAyD,iBAAA,CAAAC,EAAA,CAAAC,YAAA,GAAA3D,EAAA,CAAAyD,iBAAA,CAAAG,EAAA,CAAAC,cAAA;AAAA;;QAAb5B,MAAa;EAAA6B,SAAA;EAAAC,MAAA;IAAA/B,WAAA;EAAA;EAAAgC,OAAA;IAAA3B,eAAA;EAAA;EAAA4B,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCV1BtE,EAAA,CAAAC,cAAA,YAAO;MAEKD,EAAA,CAAAE,MAAA,WAAI;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACbH,EAAA,CAAAC,cAAA,SAAI;MAAAD,EAAA,CAAAE,MAAA,mBAAY;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACrBH,EAAA,CAAAC,cAAA,SAAI;MAAAD,EAAA,CAAAE,MAAA,cAAO;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAChBH,EAAA,CAAAC,cAAA,SAAI;MAAAD,EAAA,CAAAE,MAAA,YAAK;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACdH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,oBAAY;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACrBH,EAAA,CAAAwE,SAAA,UAAS;MACXxE,EAAA,CAAAG,YAAA,EAAK;MACPH,EAAA,CAAAyE,UAAA,KAAAC,4BAAA,iBAOK;MACT1E,EAAA,CAAAG,YAAA,EAAQ;MAERH,EAAA,CAAAyE,UAAA,KAAAE,gCAAA,oBAAsK;;;;MAV5I3E,EAAA,CAAAgB,SAAA,IAAwB;MAAxBhB,EAAA,CAAA8B,UAAA,YAAAyC,GAAA,CAAApC,YAAA,CAAAyC,QAAA,CAAwB;MAUgE5E,EAAA,CAAAgB,SAAA,GAAgC;MAAhChB,EAAA,CAAA8B,UAAA,YAAA9B,EAAA,CAAA6E,WAAA,QAAAN,GAAA,CAAApB,cAAA,IAAgC"},"metadata":{},"sourceType":"module","externalDependencies":[]}